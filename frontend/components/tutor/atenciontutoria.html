<!-- Modal DinÃ¡mico de AtenciÃ³n de TutorÃ­a (AcadÃ©mica, Personal, Profesional) -->
<div id="modalAtencionTutoria" class="modal-atencion-overlay" style="display: none;">
    <div class="modal-atencion-container">
        <div class="modal-atencion-header">
            <h2 id="tituloModalAtencion">ğŸ“š Registrar SesiÃ³n de TutorÃ­a</h2>
            <button class="btn-close-atencion" onclick="cerrarModalAtencion()">âœ•</button>
        </div>

        <div id="vistaFormularioAtencion" class="modal-atencion-content">
            <form id="formRegistroAtencion">
                <input type="hidden" id="idTutoriaAtencion">
                <input type="hidden" id="tipoTutoriaSeleccionada">

                <!-- ========== INFORMACIÃ“N BÃSICA (COMÃšN PARA TODOS) ========== -->
                <div class="form-section-atencion">
                    <h3 class="section-title-atencion">ğŸ“‹ InformaciÃ³n BÃ¡sica de la SesiÃ³n</h3>
                    
                    <div class="form-group-atencion">
                        <label for="estudianteNombreAtencion">ğŸ‘¤ Estudiante <span class="required">*</span></label>
                        <input type="text" id="estudianteNombreAtencion" class="form-control-atencion" readonly>
                    </div>

                    <div class="form-row-atencion">
                        <div class="form-group-atencion">
                            <label for="fechaSesionRegistro">ğŸ“… Fecha de la SesiÃ³n <span class="required">*</span></label>
                            <input type="date" id="fechaSesionRegistro" class="form-control-atencion" readonly>
                        </div>
                        <div class="form-group-atencion">
                            <label for="horaSesionRegistro">ğŸ• Hora de la SesiÃ³n <span class="required">*</span></label>
                            <input type="text" id="horaSesionRegistro" class="form-control-atencion" readonly>
                        </div>
                    </div>

                    <div class="form-row-atencion">
                        <div class="form-group-atencion">
                            <label for="tipoTutoriaDisplay">ğŸ“š Tipo de TutorÃ­a</label>
                            <input type="text" id="tipoTutoriaDisplay" class="form-control-atencion" readonly>
                        </div>
                        <div class="form-group-atencion">
                            <label for="modalidadSesionRegistro">ğŸ« Modalidad de la SesiÃ³n</label>
                            <input type="text" id="modalidadSesionRegistro" class="form-control-atencion" readonly>
                        </div>
                    </div>
                </div>

                <!-- ========== SECCIÃ“N ACADÃ‰MICA ========== -->
                <div id="seccionAcademica" class="form-section-atencion" style="display: none;">
                    <h3 class="section-title-atencion">ğŸ“š TUTORÃA ACADÃ‰MICA</h3>
                    <p class="section-description-atencion">Registra los temas acadÃ©micos, contenido trabajado y progreso del estudiante.</p>
                    
                    <div class="form-group-atencion">
                        <label for="temaPrincipalAtencion">ğŸ“– Tema Principal Tratado <span class="required">*</span></label>
                        <input type="text" id="temaPrincipalAtencion" class="form-control-atencion" 
                               placeholder="Ej: ProgramaciÃ³n Orientada a Objetos, CÃ¡lculo Diferencial...">
                    </div>

                    <div class="form-group-atencion">
                        <label for="contenidoEspecificoAtencion">ğŸ“ Contenido EspecÃ­fico <span class="required">*</span></label>
                        <textarea id="contenidoEspecificoAtencion" class="form-control-atencion" rows="4"
                                  placeholder="Describe el contenido especÃ­fico trabajado durante la sesiÃ³n..."></textarea>
                    </div>

                    <div class="form-group-atencion">
                        <label for="observacionesDesempenoAtencion">ğŸ’¬ Observaciones de DesempeÃ±o AcadÃ©mico <span class="required">*</span></label>
                        <textarea id="observacionesDesempenoAtencion" class="form-control-atencion" rows="5"
                                  placeholder="â€¢ Fortalezas identificadas&#10;â€¢ Dificultades encontradas&#10;â€¢ Nivel de comprensiÃ³n de los temas&#10;â€¢ Recomendaciones acadÃ©micas"></textarea>
                    </div>

                    <div class="form-group-atencion">
                        <label for="actividadesRealizadasAtencion">âœï¸ Actividades Realizadas</label>
                        <textarea id="actividadesRealizadasAtencion" class="form-control-atencion" rows="3"
                                  placeholder="Lista los ejercicios, problemas o actividades trabajadas..."></textarea>
                    </div>

                    <div class="form-group-atencion">
                        <label for="tareasAsignadasAtencion">ğŸ“‹ Tareas Asignadas para la PrÃ³xima SesiÃ³n</label>
                        <textarea id="tareasAsignadasAtencion" class="form-control-atencion" rows="4"
                                  placeholder="â€¢ Resolver ejercicios del 1 al 13 de la pÃ¡g. 23&#10;â€¢ Preparar preguntas sobre el tema&#10;â€¢ Revisar material complementario..."></textarea>
                    </div>

                    <div class="form-group-atencion">
                        <label for="recursosRecomendadosAtencion">ğŸ”— Recursos Recomendados (Enlaces, libros, videos)</label>
                        <textarea id="recursosRecomendadosAtencion" class="form-control-atencion" rows="3"
                                  placeholder="Agrega enlaces, tÃ­tulos de libros, videos o recursos que el estudiante pueda consultar..."></textarea>
                    </div>

                    <div style="text-align: right; margin-top: 15px;">
                        <button type="button" class="btn-atencion btn-success-atencion" onclick="guardarSeccionAcademica()">
                            ğŸ’¾ Guardar TutorÃ­a AcadÃ©mica
                        </button>
                    </div>
                </div>

                <!-- ========== SECCIÃ“N PERSONAL ========== -->
                <div id="seccionPersonal" class="form-section-atencion" style="display: none;">
                    <h3 class="section-title-atencion">ğŸ’¬ TUTORÃA PERSONAL</h3>
                    <p class="section-description-atencion">Registra aspectos personales, emocionales y de desarrollo integral del estudiante.</p>
                    
                    <div class="form-group-atencion">
                        <label for="situacionPersonal">ğŸ—£ï¸ SituaciÃ³n Personal Abordada <span class="required">*</span></label>
                        <textarea id="situacionPersonal" class="form-control-atencion" rows="4"
                                  placeholder="Describe brevemente la situaciÃ³n o inquietud personal del estudiante..."></textarea>
                    </div>

                    <div class="form-group-atencion">
                        <label for="estadoEmocional">ğŸ˜Š Estado Emocional Observado <span class="required">*</span></label>
                        <select id="estadoEmocional" class="form-control-atencion">
                            <option value="">--Seleccionar--</option>
                            <option value="Muy positivo">Muy positivo</option>
                            <option value="Positivo">Positivo</option>
                            <option value="Neutral">Neutral</option>
                            <option value="Preocupado">Preocupado</option>
                            <option value="Ansioso">Ansioso</option>
                            <option value="Deprimido">Deprimido</option>
                        </select>
                    </div>

                    <div class="form-group-atencion">
                        <label for="observacionesPersonales">ğŸ’­ Observaciones y Recomendaciones <span class="required">*</span></label>
                        <textarea id="observacionesPersonales" class="form-control-atencion" rows="5"
                                  placeholder="â€¢ Observaciones sobre la situaciÃ³n&#10;â€¢ Consejos y orientaciones brindadas&#10;â€¢ Recomendaciones para el estudiante&#10;â€¢ Acuerdos establecidos"></textarea>
                    </div>

                    <div class="form-group-atencion">
                        <label for="accionesTomadas">âœ… Acciones y Acuerdos</label>
                        <textarea id="accionesTomadas" class="form-control-atencion" rows="3"
                                  placeholder="Describe las acciones tomadas o acuerdos establecidos con el estudiante..."></textarea>
                    </div>

                    <div class="form-group-atencion">
                        <label for="requiereDerivacion">âš•ï¸ Â¿Requiere DerivaciÃ³n PsicolÃ³gica?</label>
                        <select id="requiereDerivacion" class="form-control-atencion">
                            <option value="No">No</option>
                            <option value="Si">SÃ­, requiere atenciÃ³n psicolÃ³gica</option>
                        </select>
                    </div>

                    <div id="divMotivoDerivacion" class="form-group-atencion" style="display: none;">
                        <label for="motivoDerivacion">ğŸ“ Motivo de DerivaciÃ³n</label>
                        <textarea id="motivoDerivacion" class="form-control-atencion" rows="3"
                                  placeholder="Explica el motivo por el cual se deriva al estudiante a atenciÃ³n psicolÃ³gica..."></textarea>
                    </div>

                    <div style="text-align: right; margin-top: 15px;">
                        <button type="button" class="btn-atencion btn-success-atencion" onclick="guardarSeccionPersonal()">
                            ğŸ’¾ Guardar TutorÃ­a Personal
                        </button>
                    </div>
                </div>

                <!-- ========== SECCIÃ“N PROFESIONAL ========== -->
                <div id="seccionProfesional" class="form-section-atencion" style="display: none;">
                    <h3 class="section-title-atencion">ğŸ’¼ TUTORÃA PROFESIONAL</h3>
                    <p class="section-description-atencion">Registra aspectos de orientaciÃ³n vocacional, desarrollo profesional y planificaciÃ³n de carrera.</p>
                    
                    <div class="form-group-atencion">
                        <label for="temaProfesional">ğŸ¯ Tema Profesional Abordado <span class="required">*</span></label>
                        <select id="temaProfesional" class="form-control-atencion">
                            <option value="">--Seleccionar--</option>
                            <option value="OrientaciÃ³n vocacional">OrientaciÃ³n vocacional</option>
                            <option value="PrÃ¡cticas profesionales">PrÃ¡cticas profesionales</option>
                            <option value="ElaboraciÃ³n de CV">ElaboraciÃ³n de CV</option>
                            <option value="Entrevistas laborales">Entrevistas laborales</option>
                            <option value="Desarrollo de habilidades">Desarrollo de habilidades blandas</option>
                            <option value="Proyecto de tesis">Proyecto de tesis</option>
                            <option value="PlanificaciÃ³n de carrera">PlanificaciÃ³n de carrera</option>
                            <option value="Otro">Otro</option>
                        </select>
                    </div>

                    <div class="form-group-atencion">
                        <label for="descripcionTema">ğŸ“„ DescripciÃ³n del Tema <span class="required">*</span></label>
                        <textarea id="descripcionTema" class="form-control-atencion" rows="4"
                                  placeholder="Describe el tema profesional tratado durante la sesiÃ³n..."></textarea>
                    </div>

                    <div class="form-group-atencion">
                        <label for="avancesLogros">ğŸ† Avances y Logros</label>
                        <textarea id="avancesLogros" class="form-control-atencion" rows="3"
                                  placeholder="Describe los avances, logros o progresos del estudiante..."></textarea>
                    </div>

                    <div class="form-group-atencion">
                        <label for="observacionesProfesionales">ğŸ’¼ Observaciones y Orientaciones <span class="required">*</span></label>
                        <textarea id="observacionesProfesionales" class="form-control-atencion" rows="5"
                                  placeholder="â€¢ Orientaciones brindadas&#10;â€¢ Recomendaciones profesionales&#10;â€¢ Ãreas de mejora identificadas&#10;â€¢ PrÃ³ximos pasos a seguir"></textarea>
                    </div>

                    <div class="form-group-atencion">
                        <label for="recursosContactos">ğŸ“ Recursos y Contactos Proporcionados</label>
                        <textarea id="recursosContactos" class="form-control-atencion" rows="3"
                                  placeholder="Enlaces, contactos, empresas recomendadas, eventos, etc..."></textarea>
                    </div>

                    <div style="text-align: right; margin-top: 15px;">
                        <button type="button" class="btn-atencion btn-success-atencion" onclick="guardarSeccionProfesional()">
                            ğŸ’¾ Guardar TutorÃ­a Profesional
                        </button>
                    </div>
                </div>

                <!-- ========== MATERIALES Y TAREAS (COMÃšN) ========== -->
                <div class="form-section-atencion">
                    <h3 class="section-title-atencion">ğŸ“š MATERIALES Y TAREAS</h3>
                    
                    <div class="form-group-atencion">
                        <label for="materialesApoyo">ğŸ“ Materiales de Apoyo (opcional)</label>
                        <div class="materiales-container">
                            <div class="file-upload-zone" onclick="document.getElementById('archivosMateriales').click()">
                                <div class="file-upload-icon">ğŸ“</div>
                                <p><strong>Haz clic para subir archivos</strong></p>
                                <small>PDF, Word, Excel, PowerPoint, imÃ¡genes (MÃ¡x. 10MB por archivo)</small>
                            </div>
                            <input type="file" id="archivosMateriales" class="file-input-hidden" 
                                   accept=".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.jpg,.jpeg,.png" multiple 
                                   onchange="procesarArchivos(this)">
                            
                            <div id="listaArchivosCargados" class="lista-archivos"></div>
                        </div>
                        <textarea id="descripcionMateriales" class="form-control-atencion" rows="2" style="margin-top: 10px;"
                                  placeholder="Lista las tareas, ejercicios o actividades que el estudiante debe completar antes de la prÃ³xima sesiÃ³n...&#10;&#10;1. Resolver ejercicios del 1 al 13 de la pÃ¡g. 23&#10;2. Preparar preguntas sobre el tema&#10;3. Saludar a todas las personas..."></textarea>
                    </div>

                    <div class="form-group-atencion">
                        <label for="recursosRecomendados">ğŸ”— Recursos Recomendados (Enlaces, libros, videos)</label>
                        <textarea id="recursosRecomendados" class="form-control-atencion" rows="3"
                                  placeholder="Agrega enlaces, tÃ­tulos de libros, videos de YouTube o cualquier recurso que el estudiante pueda consultar..."></textarea>
                    </div>

                    <div class="form-group-atencion">
                        <label for="notasComentarios">ğŸ“Œ Notas o Comentarios Adicionales</label>
                        <textarea id="notasComentarios" class="form-control-atencion" rows="3"
                                  placeholder="Cualquier informaciÃ³n adicional relevante que quieras registrar sobre esta sesiÃ³n..."></textarea>
                    </div>
                </div>

                <!-- Alerta Importante -->
                <div class="alert-warning-atencion">
                    <strong>ğŸ“Œ NOTA IMPORTANTE:</strong> Toda la informaciÃ³n registrada serÃ¡ visible para el estudiante en su panel. SÃ© claro, constructivo y profesional en tus observaciones.
                </div>

                <div class="modal-actions-atencion">
                    <button type="button" class="btn-atencion btn-secondary-atencion" onclick="cerrarModalAtencion()">
                        Cancelar
                    </button>
                    <button type="button" class="btn-atencion btn-success-atencion" onclick="finalizarTutoria()">
                        âœ… Finalizar TutorÃ­a
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<div id="loaderAtencion" class="loader-overlay-atencion" style="display: none;">
    <div class="loader-atencion"></div>
</div>
