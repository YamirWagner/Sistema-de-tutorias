<!-- Modal Din√°mico de Atenci√≥n de Tutor√≠a (Acad√©mica, Personal, Profesional) -->
<div id="modalAtencionTutoria" class="modal-atencion-overlay" style="display: none;">
    <div class="modal-atencion-container">
        <div class="modal-atencion-header">
            <h2 id="tituloModalAtencion">üìö Registrar Sesi√≥n de Tutor√≠a</h2>
            <button class="btn-close-atencion" onclick="cerrarModalAtencion()">‚úï</button>
        </div>

        <div id="vistaFormularioAtencion" class="modal-atencion-content">
            <form id="formRegistroAtencion">
                <input type="hidden" id="idTutoriaAtencion">
                <input type="hidden" id="tipoTutoriaSeleccionada">

                <!-- ========== INFORMACI√ìN B√ÅSICA (COM√öN PARA TODOS) ========== -->
                <div class="form-section-atencion">
                    <h3 class="section-title-atencion">üìã Informaci√≥n B√°sica de la Sesi√≥n</h3>
                    
                    <div class="form-group-atencion">
                        <label for="estudianteNombreAtencion">üë§ Estudiante <span class="required">*</span></label>
                        <input type="text" id="estudianteNombreAtencion" class="form-control-atencion" readonly>
                    </div>

                    <div class="form-row-atencion">
                        <div class="form-group-atencion">
                            <label for="fechaSesionRegistro">üìÖ Fecha de la Sesi√≥n <span class="required">*</span></label>
                            <input type="date" id="fechaSesionRegistro" class="form-control-atencion" readonly>
                        </div>
                        <div class="form-group-atencion">
                            <label for="horaSesionRegistro">üïê Hora de la Sesi√≥n <span class="required">*</span></label>
                            <input type="text" id="horaSesionRegistro" class="form-control-atencion" readonly>
                        </div>
                    </div>

                    <div class="form-row-atencion">
                        <div class="form-group-atencion">
                            <label for="tipoTutoriaDisplay">üìö Tipo de Tutor√≠a</label>
                            <input type="text" id="tipoTutoriaDisplay" class="form-control-atencion" readonly>
                        </div>
                        <div class="form-group-atencion">
                            <label for="modalidadSesionRegistro">üè´ Modalidad de la Sesi√≥n</label>
                            <input type="text" id="modalidadSesionRegistro" class="form-control-atencion" readonly>
                        </div>
                    </div>
                </div>

                <!-- ========== SECCI√ìN ACAD√âMICA ========== -->
                <div id="seccionAcademica" class="form-section-atencion" style="display: none;">
                    <h3 class="section-title-atencion">üìö TUTOR√çA ACAD√âMICA</h3>
                    <p class="section-description-atencion">Registra los temas acad√©micos, contenido trabajado y progreso del estudiante.</p>
                    
                    <div class="form-group-atencion">
                        <label for="temaPrincipalAtencion">üìñ Tema Principal Tratado <span class="required">*</span></label>
                        <input type="text" id="temaPrincipalAtencion" class="form-control-atencion" 
                               placeholder="Ej: Programaci√≥n Orientada a Objetos, C√°lculo Diferencial...">
                    </div>

                    <div class="form-group-atencion">
                        <label for="contenidoEspecificoAtencion">üìù Contenido Espec√≠fico <span class="required">*</span></label>
                        <textarea id="contenidoEspecificoAtencion" class="form-control-atencion" rows="4"
                                  placeholder="Describe el contenido espec√≠fico trabajado durante la sesi√≥n..."></textarea>
                    </div>

                    <div class="form-group-atencion">
                        <label for="observacionesDesempenoAtencion">üí¨ Observaciones de Desempe√±o Acad√©mico <span class="required">*</span></label>
                        <textarea id="observacionesDesempenoAtencion" class="form-control-atencion" rows="5"
                                  placeholder="‚Ä¢ Fortalezas identificadas&#10;‚Ä¢ Dificultades encontradas&#10;‚Ä¢ Nivel de comprensi√≥n de los temas&#10;‚Ä¢ Recomendaciones acad√©micas"></textarea>
                    </div>

                    <div class="form-group-atencion">
                        <label for="actividadesRealizadasAtencion">‚úèÔ∏è Actividades Realizadas</label>
                        <textarea id="actividadesRealizadasAtencion" class="form-control-atencion" rows="3"
                                  placeholder="Lista los ejercicios, problemas o actividades trabajadas..."></textarea>
                    </div>

                    <div class="form-group-atencion">
                        <label for="tareasAsignadasAtencion">üìã Tareas Asignadas para la Pr√≥xima Sesi√≥n</label>
                        <textarea id="tareasAsignadasAtencion" class="form-control-atencion" rows="4"
                                  placeholder="‚Ä¢ Resolver ejercicios del 1 al 13 de la p√°g. 23&#10;‚Ä¢ Preparar preguntas sobre el tema&#10;‚Ä¢ Revisar material complementario..."></textarea>
                    </div>

                    <div style="text-align: right; margin-top: 15px;">
                        <button type="button" class="btn-atencion btn-success-atencion" onclick="guardarSeccionAcademica()">
                            üíæ Guardar Tutor√≠a Acad√©mica
                        </button>
                    </div>
                </div>

                <!-- ========== SECCI√ìN PERSONAL ========== -->
                <div id="seccionPersonal" class="form-section-atencion" style="display: none;">
                    <h3 class="section-title-atencion">üí¨ TUTOR√çA PERSONAL</h3>
                    <p class="section-description-atencion">Registra aspectos personales, emocionales y de desarrollo integral del estudiante.</p>
                    
                    <div class="form-group-atencion">
                        <label for="situacionPersonal">üó£Ô∏è Situaci√≥n Personal Abordada <span class="required">*</span></label>
                        <textarea id="situacionPersonal" class="form-control-atencion" rows="4"
                                  placeholder="Describe brevemente la situaci√≥n o inquietud personal del estudiante..."></textarea>
                    </div>

                    <div class="form-group-atencion">
                        <label for="estadoEmocional">üòä Estado Emocional Observado <span class="required">*</span></label>
                        <select id="estadoEmocional" class="form-control-atencion">
                            <option value="">--Seleccionar--</option>
                            <option value="Muy positivo">Muy positivo</option>
                            <option value="Positivo">Positivo</option>
                            <option value="Neutral">Neutral</option>
                            <option value="Preocupado">Preocupado</option>
                            <option value="Ansioso">Ansioso</option>
                            <option value="Deprimido">Deprimido</option>
                        </select>
                    </div>

                    <div class="form-group-atencion">
                        <label for="observacionesPersonales">üí≠ Observaciones y Recomendaciones <span class="required">*</span></label>
                        <textarea id="observacionesPersonales" class="form-control-atencion" rows="5"
                                  placeholder="‚Ä¢ Observaciones sobre la situaci√≥n&#10;‚Ä¢ Consejos y orientaciones brindadas&#10;‚Ä¢ Recomendaciones para el estudiante&#10;‚Ä¢ Acuerdos establecidos"></textarea>
                    </div>

                    <div class="form-group-atencion">
                        <label for="accionesTomadas">‚úÖ Acciones y Acuerdos</label>
                        <textarea id="accionesTomadas" class="form-control-atencion" rows="3"
                                  placeholder="Describe las acciones tomadas o acuerdos establecidos con el estudiante..."></textarea>
                    </div>

                    <div class="form-group-atencion">
                        <label for="requiereDerivacion">‚öïÔ∏è ¬øRequiere Derivaci√≥n Psicol√≥gica?</label>
                        <select id="requiereDerivacion" class="form-control-atencion">
                            <option value="No">No</option>
                            <option value="Si">S√≠, requiere atenci√≥n psicol√≥gica</option>
                        </select>
                    </div>

                    <div id="divMotivoDerivacion" class="form-group-atencion" style="display: none;">
                        <label for="motivoDerivacion">üìù Motivo de Derivaci√≥n</label>
                        <textarea id="motivoDerivacion" class="form-control-atencion" rows="3"
                                  placeholder="Explica el motivo por el cual se deriva al estudiante a atenci√≥n psicol√≥gica..."></textarea>
                    </div>

                    <div style="text-align: right; margin-top: 15px;">
                        <button type="button" class="btn-atencion btn-success-atencion" onclick="guardarSeccionPersonal()">
                            üíæ Guardar Tutor√≠a Personal
                        </button>
                    </div>
                </div>

                <!-- ========== SECCI√ìN PROFESIONAL ========== -->
                <div id="seccionProfesional" class="form-section-atencion" style="display: none;">
                    <h3 class="section-title-atencion">üíº TUTOR√çA PROFESIONAL</h3>
                    <p class="section-description-atencion">Registra aspectos de orientaci√≥n vocacional, desarrollo profesional y planificaci√≥n de carrera.</p>
                    
                    <div class="form-group-atencion">
                        <label for="temaProfesional">üéØ Tema Profesional Abordado <span class="required">*</span></label>
                        <select id="temaProfesional" class="form-control-atencion">
                            <option value="">--Seleccionar--</option>
                            <option value="Orientaci√≥n vocacional">Orientaci√≥n vocacional</option>
                            <option value="Pr√°cticas profesionales">Pr√°cticas profesionales</option>
                            <option value="Elaboraci√≥n de CV">Elaboraci√≥n de CV</option>
                            <option value="Entrevistas laborales">Entrevistas laborales</option>
                            <option value="Desarrollo de habilidades">Desarrollo de habilidades blandas</option>
                            <option value="Proyecto de tesis">Proyecto de tesis</option>
                            <option value="Planificaci√≥n de carrera">Planificaci√≥n de carrera</option>
                            <option value="Otro">Otro</option>
                        </select>
                    </div>

                    <div class="form-group-atencion">
                        <label for="descripcionTema">üìÑ Descripci√≥n del Tema <span class="required">*</span></label>
                        <textarea id="descripcionTema" class="form-control-atencion" rows="4"
                                  placeholder="Describe el tema profesional tratado durante la sesi√≥n..."></textarea>
                    </div>

                    <div class="form-group-atencion">
                        <label for="avancesLogros">üèÜ Avances y Logros</label>
                        <textarea id="avancesLogros" class="form-control-atencion" rows="3"
                                  placeholder="Describe los avances, logros o progresos del estudiante..."></textarea>
                    </div>

                    <div class="form-group-atencion">
                        <label for="observacionesProfesionales">üíº Observaciones y Orientaciones <span class="required">*</span></label>
                        <textarea id="observacionesProfesionales" class="form-control-atencion" rows="5"
                                  placeholder="‚Ä¢ Orientaciones brindadas&#10;‚Ä¢ Recomendaciones profesionales&#10;‚Ä¢ √Åreas de mejora identificadas&#10;‚Ä¢ Pr√≥ximos pasos a seguir"></textarea>
                    </div>

                    <div class="form-group-atencion">
                        <label for="recursosContactos">üìû Recursos y Contactos Proporcionados</label>
                        <textarea id="recursosContactos" class="form-control-atencion" rows="3"
                                  placeholder="Enlaces, contactos, empresas recomendadas, eventos, etc..."></textarea>
                    </div>

                    <div style="text-align: right; margin-top: 15px;">
                        <button type="button" class="btn-atencion btn-success-atencion" onclick="guardarSeccionProfesional()">
                            üíæ Guardar Tutor√≠a Profesional
                        </button>
                    </div>
                </div>

                <!-- ========== MATERIALES Y RECURSOS (COM√öN) ========== -->
                <div class="form-section-atencion">
                    <h3 class="section-title-atencion">üìö MATERIALES Y RECURSOS</h3>
                    <p class="section-description-atencion">Agrega materiales de apoyo seg√∫n su tipo. Selecciona el tipo de material y proporciona archivo o enlace seg√∫n corresponda.</p>
                    
                    <div class="form-group-atencion">
                        <label>üìé Agregar Material de Apoyo (opcional)</label>
                        
                        <!-- Selector de Tipo de Material -->
                        <div style="margin-bottom: 15px;">
                            <label for="tipoMaterialSelect" style="font-size: 0.9rem; margin-bottom: 5px;">Tipo de Material:</label>
                            <select id="tipoMaterialSelect" class="form-control-atencion" onchange="cambiarTipoMaterial()">
                                <option value="">-- Seleccionar tipo --</option>
                                <option value="PDF">üìÑ PDF</option>
                                <option value="Video">üé• Video</option>
                                <option value="Documento">üìù Documento (Word, Excel, PowerPoint)</option>
                                <option value="Enlace">üîó Enlace / URL</option>
                                <option value="Otro">üì¶ Otro</option>
                            </select>
                        </div>

                        <!-- Zona para PDF -->
                        <div id="zonaPDF" class="zona-tipo-material" style="display: none;">
                            <label for="archivoPDF">Subir archivo PDF:</label>
                            <input type="file" id="archivoPDF" class="form-control-atencion" accept=".pdf" style="margin-bottom: 10px;">
                            <input type="text" id="tituloPDF" class="form-control-atencion" placeholder="T√≠tulo del PDF (opcional)" style="margin-bottom: 10px;">
                            <textarea id="descripcionPDF" class="form-control-atencion" rows="2" placeholder="Descripci√≥n breve del contenido..."></textarea>
                            <button type="button" class="btn-add-material" onclick="agregarMaterialTipo('PDF')">‚ûï Agregar PDF</button>
                        </div>

                        <!-- Zona para Video -->
                        <div id="zonaVideo" class="zona-tipo-material" style="display: none;">
                            <label for="archivoVideo">Subir archivo de video:</label>
                            <input type="file" id="archivoVideo" class="form-control-atencion" accept=".mp4,.avi,.mov,.wmv,.flv,.mkv" style="margin-bottom: 10px;">
                            <small style="color: #666; display: block; margin-bottom: 10px;">O proporciona un enlace de YouTube, Vimeo, etc.:</small>
                            <input type="url" id="enlaceVideo" class="form-control-atencion" placeholder="https://youtube.com/watch?v=..." style="margin-bottom: 10px;">
                            <input type="text" id="tituloVideo" class="form-control-atencion" placeholder="T√≠tulo del video (opcional)" style="margin-bottom: 10px;">
                            <textarea id="descripcionVideo" class="form-control-atencion" rows="2" placeholder="Descripci√≥n del video..."></textarea>
                            <button type="button" class="btn-add-material" onclick="agregarMaterialTipo('Video')">‚ûï Agregar Video</button>
                        </div>

                        <!-- Zona para Documento -->
                        <div id="zonaDocumento" class="zona-tipo-material" style="display: none;">
                            <label for="archivoDocumento">Subir documento:</label>
                            <input type="file" id="archivoDocumento" class="form-control-atencion" 
                                   accept=".doc,.docx,.xls,.xlsx,.ppt,.pptx,.odt,.ods,.odp" style="margin-bottom: 10px;">
                            <small style="color: #666; display: block; margin-bottom: 10px;">Formatos: Word, Excel, PowerPoint</small>
                            <input type="text" id="tituloDocumento" class="form-control-atencion" placeholder="T√≠tulo del documento (opcional)" style="margin-bottom: 10px;">
                            <textarea id="descripcionDocumento" class="form-control-atencion" rows="2" placeholder="Descripci√≥n del documento..."></textarea>
                            <button type="button" class="btn-add-material" onclick="agregarMaterialTipo('Documento')">‚ûï Agregar Documento</button>
                        </div>

                        <!-- Zona para Enlace -->
                        <div id="zonaEnlace" class="zona-tipo-material" style="display: none;">
                            <label for="urlEnlace">URL del recurso:</label>
                            <input type="url" id="urlEnlace" class="form-control-atencion" 
                                   placeholder="https://ejemplo.com/recurso" style="margin-bottom: 10px;" required>
                            <input type="text" id="tituloEnlace" class="form-control-atencion" placeholder="T√≠tulo del enlace (opcional)" style="margin-bottom: 10px;">
                            <textarea id="descripcionEnlace" class="form-control-atencion" rows="2" placeholder="Descripci√≥n del recurso..."></textarea>
                            <button type="button" class="btn-add-material" onclick="agregarMaterialTipo('Enlace')">‚ûï Agregar Enlace</button>
                        </div>

                        <!-- Zona para Otro -->
                        <div id="zonaOtro" class="zona-tipo-material" style="display: none;">
                            <label for="archivoOtro">Subir archivo:</label>
                            <input type="file" id="archivoOtro" class="form-control-atencion" style="margin-bottom: 10px;">
                            <small style="color: #666; display: block; margin-bottom: 10px;">O proporciona un enlace:</small>
                            <input type="url" id="enlaceOtro" class="form-control-atencion" placeholder="https://..." style="margin-bottom: 10px;">
                            <input type="text" id="tituloOtro" class="form-control-atencion" placeholder="T√≠tulo (opcional)" style="margin-bottom: 10px;">
                            <textarea id="descripcionOtro" class="form-control-atencion" rows="2" placeholder="Descripci√≥n..."></textarea>
                            <button type="button" class="btn-add-material" onclick="agregarMaterialTipo('Otro')">‚ûï Agregar Material</button>
                        </div>

                        <!-- Lista de Materiales Agregados -->
                        <div id="listaMaterialesAgregados" class="lista-materiales" style="margin-top: 20px;"></div>
                    </div>

                    <div class="form-group-atencion">
                        <label for="recursosRecomendados">ÔøΩ Referencias Bibliogr√°ficas / Recursos de Texto (opcional)</label>
                        <textarea id="recursosRecomendados" class="form-control-atencion" rows="3"
                                  placeholder="Agrega referencias bibliogr√°ficas, t√≠tulos de libros, art√≠culos o recursos de texto que no sean archivos...&#10;&#10;Ejemplo:&#10;‚Ä¢ Libro: Programaci√≥n Avanzada - Autor: Juan P√©rez&#10;‚Ä¢ Art√≠culo: Introducci√≥n a la POO - Revista XYZ, 2024"></textarea>
                    </div>

                    <div class="form-group-atencion">
                        <label for="notasComentarios">üìå Notas o Comentarios Adicionales</label>
                        <textarea id="notasComentarios" class="form-control-atencion" rows="3"
                                  placeholder="Cualquier informaci√≥n adicional relevante que quieras registrar sobre esta sesi√≥n..."></textarea>
                    </div>
                </div>

                <!-- Alerta Importante -->
                <div class="alert-warning-atencion">
                    <strong>üìå NOTA IMPORTANTE:</strong> Toda la informaci√≥n registrada ser√° visible para el estudiante en su panel. S√© claro, constructivo y profesional en tus observaciones.
                </div>

                <div class="modal-actions-atencion">
                    <button type="button" class="btn-atencion btn-secondary-atencion" onclick="cerrarModalAtencion()">
                        Cancelar
                    </button>
                    <button type="button" class="btn-atencion btn-success-atencion" onclick="finalizarTutoria()">
                        ‚úÖ Finalizar Tutor√≠a
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<div id="loaderAtencion" class="loader-overlay-atencion" style="display: none;">
    <div class="loader-atencion"></div>
</div>
